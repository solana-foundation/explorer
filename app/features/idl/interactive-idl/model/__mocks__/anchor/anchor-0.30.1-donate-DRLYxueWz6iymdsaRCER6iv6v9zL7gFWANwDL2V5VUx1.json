{"address":"DRLYxueWz6iymdsaRCER6iv6v9zL7gFWANwDL2V5VUx1","metadata":{"name":"donation_relay","version":"0.1.0","spec":"0.1.0","description":"Donation Relay Program"},"instructions":[{"name":"close_donation_epoch_v1","docs":["Closes a donation epoch and creates a distribution account for processing.","","This instruction is restricted to the relayer only. It finalizes a donation epoch","by transferring accumulated donations from the debouncer to a new distribution account.","The distribution account will be used to swap and distribute donations to recipients","in subsequent instructions.","","# Arguments","* `config_id` - The 32-byte configuration ID identifying the campaign","* `epoch` - The epoch number to close (must be less than the current epoch)","","# Returns","A `DonationEpochClosedV1Event` containing the closed epoch details","","# Access Control","Only the relayer address can call this instruction."],"discriminator":[171,28,54,214,140,137,101,90],"accounts":[{"name":"distribution","writable":true,"pda":{"seeds":[{"kind":"const","value":[100,105,115,116,114,105,98,117,116,105,111,110,95,118,49]},{"kind":"arg","path":"config_id"},{"kind":"account","path":"mint"},{"kind":"arg","path":"epoch"}]}},{"name":"distribution_token_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"distribution"},{"kind":"account","path":"token_program"},{"kind":"account","path":"mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"epoch_tracker","docs":["Epoch tracker for this (config_id, mint) pair"],"writable":true,"pda":{"seeds":[{"kind":"const","value":[101,112,111,99,104,95,116,114,97,99,107,101,114,95,118,49]},{"kind":"arg","path":"config_id"},{"kind":"account","path":"mint"}]}},{"name":"debouncer","writable":true,"pda":{"seeds":[{"kind":"const","value":[100,101,98,111,117,110,99,101,114,95,118,49]},{"kind":"arg","path":"config_id"},{"kind":"account","path":"mint"}]}},{"name":"debouncer_token_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"debouncer"},{"kind":"account","path":"token_program"},{"kind":"account","path":"mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"mint","writable":true},{"name":"token_program"},{"name":"signer","writable":true,"signer":true,"address":"AUTHoQhF84kSTdmacHU4ncRvbRSKnbVX6AUijnTcVYz2"},{"name":"associated_token_program","address":"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{"name":"system_program","address":"11111111111111111111111111111111"},{"name":"event_authority","pda":{"seeds":[{"kind":"const","value":[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{"name":"program"}],"args":[{"name":"config_id","type":{"array":["u8",32]}},{"name":"epoch","type":"u128"}],"returns":{"defined":{"name":"DonationEpochClosedV1Event"}}},{"name":"distribute_non_swap_output_mint_v1","docs":["Distributes donations when the mint is already the output mint (no swap needed).","","This instruction is restricted to the relayer only. It distributes tokens directly","to recipients without performing a swap, used when the donation mint is already","the output mint (e.g., donations are already in USDC). The distribution account","is closed after successful execution.","","# Arguments","* `shares` - Vector of recipient shares, each containing an address and basis points.","The sum of all basis points must equal 10000 (100%).","","# Returns","A `DonationEpochProcessedV1Event` containing distribution receipts for each recipient","","# Access Control","Only the relayer address can call this instruction.","","# Remaining Accounts","The instruction expects remaining accounts to be recipient token accounts","(one per share, for receiving distributions). Might require prepended instructions to create the token accounts"],"discriminator":[152,149,100,48,118,236,9,243],"accounts":[{"name":"epoch_tracker","pda":{"seeds":[{"kind":"const","value":[101,112,111,99,104,95,116,114,97,99,107,101,114,95,118,49]},{"kind":"account","path":"distribution.config_id","account":"DistributionV1"},{"kind":"account","path":"mint"}]}},{"name":"debouncer","pda":{"seeds":[{"kind":"const","value":[100,101,98,111,117,110,99,101,114,95,118,49]},{"kind":"account","path":"distribution.config_id","account":"DistributionV1"},{"kind":"account","path":"mint"}]}},{"name":"distribution","writable":true,"pda":{"seeds":[{"kind":"const","value":[100,105,115,116,114,105,98,117,116,105,111,110,95,118,49]},{"kind":"account","path":"distribution.config_id","account":"DistributionV1"},{"kind":"account","path":"distribution.mint","account":"DistributionV1"},{"kind":"account","path":"distribution.epoch","account":"DistributionV1"}]}},{"name":"distribution_token_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"distribution"},{"kind":"account","path":"token_program"},{"kind":"account","path":"mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"mint","writable":true,"address":"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"},{"name":"signer","writable":true,"signer":true,"address":"AUTHoQhF84kSTdmacHU4ncRvbRSKnbVX6AUijnTcVYz2"},{"name":"token_program"},{"name":"associated_token_program","address":"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{"name":"system_program","address":"11111111111111111111111111111111"},{"name":"event_authority","pda":{"seeds":[{"kind":"const","value":[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{"name":"program"}],"args":[{"name":"shares","type":{"vec":{"defined":{"name":"Share"}}}}],"returns":{"defined":{"name":"DonationEpochProcessedV1Event"}}},{"name":"donate_pubkey_config_id_v1","docs":["Makes a donation identified by a Pubkey config ID.","","This is a convenience variant of `donate_v1` that accepts a `Pubkey` instead of","a 32-byte array for the config ID. The Pubkey is converted to bytes internally.","Functionally equivalent to `donate_v1` but may be more convenient for clients","that work with Pubkeys, like the Solana Explorer.","","# Arguments","* `amount` - The amount of tokens to donate (in the mint's base units)","* `config_id` - The Pubkey identifying the configuration (converted to 32 bytes internally)","* `tip_bps` - The tip amount in basis points (1 basis point = 0.01%, 10000 = 100%)","* `message` - An optional message from the donor (max 255 characters)","* `credited_to` - The pubkey to credit the donation to","","# Returns","A `DonationV1Event` containing the donation details"],"discriminator":[187,141,207,216,60,246,196,155],"accounts":[{"name":"epoch_tracker","writable":true,"pda":{"seeds":[{"kind":"const","value":[101,112,111,99,104,95,116,114,97,99,107,101,114,95,118,49]},{"kind":"arg","path":"config_id"},{"kind":"account","path":"mint"}]}},{"name":"debouncer","writable":true,"pda":{"seeds":[{"kind":"const","value":[100,101,98,111,117,110,99,101,114,95,118,49]},{"kind":"arg","path":"config_id"},{"kind":"account","path":"mint"}]}},{"name":"debouncer_token_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"debouncer"},{"kind":"account","path":"token_program"},{"kind":"account","path":"mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"mint","writable":true},{"name":"from_token_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"from"},{"kind":"account","path":"token_program"},{"kind":"account","path":"mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"from","writable":true,"signer":true},{"name":"associated_token_program","address":"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{"name":"token_program"},{"name":"system_program","address":"11111111111111111111111111111111"},{"name":"event_authority","pda":{"seeds":[{"kind":"const","value":[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{"name":"program"}],"args":[{"name":"amount","type":"u64"},{"name":"config_id","type":"pubkey"},{"name":"tip_bps","type":"u16"},{"name":"message","type":"string"},{"name":"credited_to","type":"pubkey"}],"returns":{"defined":{"name":"DonationV1Event"}}},{"name":"donate_v1","docs":["Makes a donation identified by a 32-byte config ID.","","This instruction transfers tokens from the donor's account to a debouncer account,","which accumulates donations for a specific epoch. The donation is tracked and","will be processed by the relayer in a future epoch.","","# Arguments","* `amount` - The amount of tokens to donate (in the mint's base units)","* `config_id` - The 32-byte configuration ID","* `tip_bps` - The tip amount in basis points (1 basis point = 0.01%, 10000 = 100%)","* `message` - An optional message from the donor (max 255 characters)","* `credited_to` - The pubkey to credit the donation to","","# Returns","A `DonationV1Event` containing the donation details"],"discriminator":[136,8,102,156,214,4,17,171],"accounts":[{"name":"epoch_tracker","writable":true,"pda":{"seeds":[{"kind":"const","value":[101,112,111,99,104,95,116,114,97,99,107,101,114,95,118,49]},{"kind":"arg","path":"config_id"},{"kind":"account","path":"mint"}]}},{"name":"debouncer","writable":true,"pda":{"seeds":[{"kind":"const","value":[100,101,98,111,117,110,99,101,114,95,118,49]},{"kind":"arg","path":"config_id"},{"kind":"account","path":"mint"}]}},{"name":"debouncer_token_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"debouncer"},{"kind":"account","path":"token_program"},{"kind":"account","path":"mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"mint","writable":true},{"name":"from_token_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"from"},{"kind":"account","path":"token_program"},{"kind":"account","path":"mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"from","writable":true,"signer":true},{"name":"associated_token_program","address":"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{"name":"token_program"},{"name":"system_program","address":"11111111111111111111111111111111"},{"name":"event_authority","pda":{"seeds":[{"kind":"const","value":[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{"name":"program"}],"args":[{"name":"amount","type":"u64"},{"name":"config_id","type":{"array":["u8",32]}},{"name":"tip_bps","type":"u16"},{"name":"message","type":"string"},{"name":"credited_to","type":"pubkey"}],"returns":{"defined":{"name":"DonationV1Event"}}},{"name":"swap_then_distribute_v1","docs":["Swaps accumulated donations via Jupiter and distributes to recipients.","","This instruction is restricted to the relayer only. It performs a token swap using","Jupiter Aggregator to convert the input token to the output mint (typically USDC),","then distributes the swapped tokens to recipients according to the provided shares.","The distribution account is closed after successful execution.","","# Arguments","* `jupiter_swap_ix_data` - Serialized Jupiter swap instruction data","* `shares` - Vector of recipient shares, each containing an address and basis points.","The sum of all basis points must equal 10000 (100%).","","# Returns","A `DonationEpochProcessedV1Event` containing distribution receipts for each recipient","","# Access Control","Only the relayer address can call this instruction.","","# Remaining Accounts","The instruction expects remaining accounts in this order:","1. Recipient token accounts (one per share, for receiving distributions), might require prepended instructions to create the token accounts.","2. Jupiter swap accounts (as required by the Jupiter swap instruction)"],"discriminator":[218,85,237,178,24,174,102,41],"accounts":[{"name":"epoch_tracker","pda":{"seeds":[{"kind":"const","value":[101,112,111,99,104,95,116,114,97,99,107,101,114,95,118,49]},{"kind":"account","path":"distribution.config_id","account":"DistributionV1"},{"kind":"account","path":"distribution.mint","account":"DistributionV1"}]}},{"name":"debouncer","pda":{"seeds":[{"kind":"const","value":[100,101,98,111,117,110,99,101,114,95,118,49]},{"kind":"account","path":"distribution.config_id","account":"DistributionV1"},{"kind":"account","path":"distribution.mint","account":"DistributionV1"}]}},{"name":"distribution","writable":true,"pda":{"seeds":[{"kind":"const","value":[100,105,115,116,114,105,98,117,116,105,111,110,95,118,49]},{"kind":"account","path":"distribution.config_id","account":"DistributionV1"},{"kind":"account","path":"distribution.mint","account":"DistributionV1"},{"kind":"account","path":"distribution.epoch","account":"DistributionV1"}]}},{"name":"distribution_token_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"distribution"},{"kind":"account","path":"token_program"},{"kind":"account","path":"mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"output_distribution_token_account","writable":true,"pda":{"seeds":[{"kind":"account","path":"distribution"},{"kind":"account","path":"token_program"},{"kind":"account","path":"mint"}],"program":{"kind":"const","value":[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{"name":"mint","writable":true},{"name":"output_mint","writable":true,"address":"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"},{"name":"output_mint_program"},{"name":"signer","writable":true,"signer":true,"address":"AUTHoQhF84kSTdmacHU4ncRvbRSKnbVX6AUijnTcVYz2"},{"name":"token_program"},{"name":"jupiter_program","docs":["The Jupiter program that will execute the swap"],"address":"JUP6LkbZbjS1jKKwapdHNy74zcZ3tLUZoi5QNyVTaV4"},{"name":"associated_token_program","address":"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{"name":"system_program","address":"11111111111111111111111111111111"},{"name":"event_authority","pda":{"seeds":[{"kind":"const","value":[95,95,101,118,101,110,116,95,97,117,116,104,111,114,105,116,121]}]}},{"name":"program"}],"args":[{"name":"jupiter_swap_ix_data","type":"bytes"},{"name":"shares","type":{"vec":{"defined":{"name":"Share"}}}}],"returns":{"defined":{"name":"DonationEpochProcessedV1Event"}}}],"accounts":[{"name":"DebouncerV1","discriminator":[137,137,192,77,110,184,189,28]},{"name":"DistributionV1","discriminator":[228,175,114,137,165,18,11,14]},{"name":"EpochTrackerV1","discriminator":[130,12,50,226,170,109,160,155]}],"events":[{"name":"DonationEpochClosedV1Event","discriminator":[155,169,23,14,6,117,86,147]},{"name":"DonationEpochProcessedV1Event","discriminator":[225,251,131,171,232,182,67,59]},{"name":"DonationV1Event","discriminator":[47,39,171,252,36,174,131,218]}],"errors":[{"code":6000,"name":"EmptyRoute"},{"code":6001,"name":"SlippageToleranceExceeded"},{"code":6002,"name":"InvalidCalculation"},{"code":6003,"name":"MissingPlatformFeeAccount"},{"code":6004,"name":"InvalidSlippage"},{"code":6005,"name":"NotEnoughPercent"},{"code":6006,"name":"InvalidInputIndex"},{"code":6007,"name":"InvalidOutputIndex"},{"code":6008,"name":"NotEnoughAccountKeys"},{"code":6009,"name":"NonZeroMinimumOutAmountNotSupported"},{"code":6010,"name":"InvalidRoutePlan"},{"code":6011,"name":"InvalidReferralAuthority"},{"code":6012,"name":"LedgerTokenAccountDoesNotMatch"},{"code":6013,"name":"InvalidTokenLedger"},{"code":6014,"name":"IncorrectTokenProgramID"},{"code":6015,"name":"TokenProgramNotProvided"},{"code":6016,"name":"SwapNotSupported"},{"code":6017,"name":"ExactOutAmountNotMatched"},{"code":6018,"name":"SourceAndDestinationMintCannotBeTheSame"},{"code":6019,"name":"InvalidMint"},{"code":6020,"name":"InvalidProgramAuthority"},{"code":6021,"name":"InvalidOutputTokenAccount"},{"code":6022,"name":"InvalidFeeWallet"},{"code":6023,"name":"InvalidAuthority"},{"code":6024,"name":"InsufficientFunds"},{"code":6025,"name":"InvalidTokenAccount"},{"code":6026,"name":"BondingCurveAlreadyCompleted"}],"types":[{"name":"DebouncerV1","type":{"kind":"struct","fields":[{"name":"bump","type":"u8"},{"name":"state","type":{"defined":{"name":"DebouncerV1State"}}},{"name":"config_id","type":{"array":["u8",32]}},{"name":"mint","type":"pubkey"},{"name":"total_amount","type":"u64"}]}},{"name":"DebouncerV1State","type":{"kind":"enum","variants":[{"name":"Uninitialized"},{"name":"Initialized"}]}},{"name":"DistributionV1","type":{"kind":"struct","fields":[{"name":"bump","type":"u8"},{"name":"state","type":{"defined":{"name":"DistributionV1State"}}},{"name":"config_id","type":{"array":["u8",32]}},{"name":"mint","type":"pubkey"},{"name":"epoch","type":"u128"},{"name":"total_amount","type":"u64"}]}},{"name":"DistributionV1State","type":{"kind":"enum","variants":[{"name":"Uninitialized"},{"name":"Initialized"}]}},{"name":"DonationEpochClosedV1Event","type":{"kind":"struct","fields":[{"name":"discriminator","type":{"defined":{"name":"EventDiscriminator"}}},{"name":"config_id","type":{"array":["u8",32]}},{"name":"mint","type":"pubkey"},{"name":"epoch","type":"u128"},{"name":"gross_epoch_amount","type":"u64"}]}},{"name":"DonationEpochProcessedV1Event","type":{"kind":"struct","fields":[{"name":"discriminator","type":{"defined":{"name":"EventDiscriminator"}}},{"name":"config_id","type":{"array":["u8",32]}},{"name":"mint","type":"pubkey"},{"name":"epoch","type":"u128"},{"name":"settled_amount","type":"u64"},{"name":"transfers","type":{"vec":{"defined":{"name":"Receipt"}}}}]}},{"name":"DonationV1Event","type":{"kind":"struct","fields":[{"name":"discriminator","type":{"defined":{"name":"EventDiscriminator"}}},{"name":"config_id","type":{"array":["u8",32]}},{"name":"mint","type":"pubkey"},{"name":"epoch","type":"u128"},{"name":"gross_amount","type":"u64"},{"name":"tip","type":"u64"},{"name":"message","type":"string"},{"name":"credited_to","type":"pubkey"}]}},{"name":"EpochTrackerV1","type":{"kind":"struct","fields":[{"name":"bump","type":"u8"},{"name":"state","type":{"defined":{"name":"EpochTrackerV1State"}}},{"name":"config_id","type":{"array":["u8",32]}},{"name":"mint","type":"pubkey"},{"name":"current_epoch","type":"u128"}]}},{"name":"EpochTrackerV1State","type":{"kind":"enum","variants":[{"name":"Uninitialized"},{"name":"Initialized"}]}},{"name":"EventDiscriminator","repr":{"kind":"rust"},"type":{"kind":"enum","variants":[{"name":"DonationV1"},{"name":"DonationEpochClosedV1"},{"name":"DonationEpochProcessedV1"}]}},{"name":"Receipt","type":{"kind":"struct","fields":[{"name":"address","type":"pubkey"},{"name":"amount","type":"u64"},{"name":"bps","type":"u16"}]}},{"name":"Share","type":{"kind":"struct","fields":[{"name":"address","type":"pubkey"},{"name":"bps","type":"u16"}]}}],"constants":[{"name":"DEBOUNCER_V1","type":"string","value":"\"debouncer_v1\""},{"name":"DISTRIBUTION_V1","type":"string","value":"\"distribution_v1\""},{"name":"EPOCH_TRACKER_V1","type":"string","value":"\"epoch_tracker_v1\""},{"name":"JUPITER_AGGREGATOR_PROGRAM_ID","type":"pubkey","value":"JUP6LkbZbjS1jKKwapdHNy74zcZ3tLUZoi5QNyVTaV4"},{"name":"OUTPUT_MINT","type":"pubkey","value":"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"},{"name":"RELAYER_ADDRESS","type":"pubkey","value":"AUTHoQhF84kSTdmacHU4ncRvbRSKnbVX6AUijnTcVYz2"}]}